#基于 [Console-Rpg-Engine](https://github.com/xiaorang/Console-Rpg-Engine) 改造,非常感谢xiaorang的开源。



## 说明

用控制台做游戏的缺点是界面效果的表现力受限，好处是正因为表现力受限，可以把更多的注意力放在逻辑本身。

这款RPG引擎包括了

- 地图切换系统
- 行走系统
- NPC系统
- 菜单系统
- 对话系统
- 进度存取系统
- 战斗系统
- 内部变量系统
- 脚本系统
- 扩展功能：
- 1、在原有Console-Rpg-Engine引擎基础上增加通过http的GET请求获取在线实时结果保存到指定变量中的功能。【已完成】
- 2、增加对话系统中，使用变量内容做为对话内容展示的方法。【已完成】
- 3、增加在脚本中使用当前现实世界时间（精确到小时）作为逻辑判断的方法。【已完成】

对于简单的RPG游戏来说，已经比较完整的了。

代码的结构非常简单，使用dev c++开发，由于使用了curl所以必须使用工程来管理，打开rpg.dev 编译运行即可。
其中包括了4个文件

- main.cpp 主程序，运行控制
- action.cpp 脚本处理
- tools.cpp 工具函数
- audio_clip.cpp 音乐播放库


===============================================

###网络请求数据赋值方法：

```shell
@var
URLTEXT|V9=http://172.18.165.135/go.html
```

@var 固定为变量赋值声明

URLTEXT|  开头则表示为通过网络请求获取数据内容。

V9        变量名称

http://172.18.165.135/go.html 可以是由任何方式的get请求地址。可以附带请求参数等。需要注意的是如果返回的内容中包含中文，需要确保字符编码为GBK或者GB2312。否则可能在后续的对话中无法正常显示。


==============================================

###对话中使用变量作为对话内容的方法：

```shell
@talk
测试,你来<%V9>，等级<%_Lev>级。
囧大,最近本镇很不安宁，夜里总能听到野兽咆哮的声音。
@endTalk
```

@talk 声明以下内容为对话

','号左边的部分表示对话角色名称。

','号右边的部分表示对话的内容。如果需要从游戏内存变量中获取内容。则需要用<%变量名>来表示，后面跟的V9就是游戏内存中变量的名称。


==============================================

###对话中使用当前系统时间作为逻辑判断的方法：

```shell
#C:(民,15)  探索触发对话，但可以自由行动，冒号后面的是其图形和颜色
46,6
@if
%time=21
@talk
居民,每天这个时候妖怪都会出现。
@endtalk
@else
@talk
居民,现在总算是安全了。
@endtalk
@endif
#END
```

正常情况下%号后跟的字符表示需要判断的内存中变量的值，当脚本输入为%time时，则表示判断当前时间是否为=号右边的时间值。条件满足则继续执行。

===============================================

###关于curl模块引入：

因为用到了网络请求，所以集成了curl引擎。需要你自己下载curl模块源码，并加入到项目中。

以DEVC++安装目录为 C:\Program Files (x86)\Dev-Cpp 为例

1、先去下载curl模块。具体地址：https://curl.se/download.html 根据你的系统决定下载哪个包。这里开发环境时WIN1164位。所以选的 https://curl.se/windows/

https://curl.se/windows/dl-8.5.0_6/curl-8.5.0_6-win64-mingw.zip

curl for 64-bit

Size: 7.4 MB

sha256: 7ed01e22cffb25e3b9761cacbf5d6d151015c3dd0fa8e2f13ffb98c7087a903f

解压后将解压目录中的 bin include lib 三个目录复制到 C:\Program Files (x86)\Dev-Cpp\MinGW64\x86_64-w64-mingw32 中

然后在devc++ 中 选 【项目】--->【项目属性】--->【参数】--->【连接器】将以下内容复制粘贴进去，点击确定保存。

```shell
-L"C:/Program Files (x86)/Dev-Cpp/MinGW64/x86_64-w64-mingw32/lib/libcurl.a" -lcurl
```

==================================================

###实际效果演示

![游戏实际效果演示](微信图片_20240123183312.png)
![游戏实际效果演示](微信图片_20240123183332.png)
![游戏实际效果演示](微信图片_20240123183346.png)
![游戏实际效果演示](微信图片_20240123183431.png)
![游戏实际效果演示](微信图片_20240123183500.png)


技术交流群：734340800
